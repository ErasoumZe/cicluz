@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   LIGHT MODE â€” CICLUZ (conteÃºdo claro + sidebar escura)
   ========================================================= */
:root {
  /* UI scale (80% by default on desktop) */
  --ui-scale-base: 0.8;
  --ui-scale: var(--ui-scale-base);

  /* Pointer spotlight (global) */
  --spotlight-x: 0;
  --spotlight-y: 0;
  --spotlight-xp: 0.5;
  --spotlight-yp: 0.5;

  --button-outline: rgba(0, 0, 0, .10);
  --badge-outline: rgba(0, 0, 0, .05);
  --opaque-button-border-intensity: -8;
  --elevate-1: rgba(0, 0, 0, .03);
  --elevate-2: rgba(0, 0, 0, .08);

  /* Page / content */
  --background: 270 25% 99%;
  --foreground: 262 30% 15%;
  --border: 262 15% 90%;

  --card: 270 20% 98%;
  --card-foreground: 262 30% 15%;
  --card-border: 262 15% 92%;

  /* ðŸ”¥ SIDEBAR â€” ESCURA NO TEMA CLARO */
  --sidebar: 270 20% 98%;
  --sidebar-foreground: 262 30% 15%;
  --sidebar-border: 262 15% 88%;

  --sidebar-primary: 262 70% 55%;
  --sidebar-primary-foreground: 0 0% 100%;

  --sidebar-accent: 262 18% 94%;
  --sidebar-accent-foreground: 262 30% 15%;
  --sidebar-ring: 262 70% 55%;

  --popover: 270 20% 96%;
  --popover-foreground: 262 30% 15%;
  --popover-border: 262 15% 88%;

  --primary: 262 70% 55%;
  --primary-foreground: 0 0% 100%;
  --secondary: 0 0% 90%;
  --secondary-foreground: 0 0% 10%;

  --muted: 260 6% 88%;
  --muted-foreground: 0 0% 25%;
  --accent: 260 8% 90%;
  --accent-foreground: 0 0% 10%;

  --destructive: 0 84% 48%;
  --destructive-foreground: 0 0% 98%;

  --input: 0 0% 75%;
  --ring: 262 83% 58%;

  /* Charts */
  --chart-1: 262 83% 45%;
  --chart-2: 195 85% 42%;
  --chart-3: 45 93% 47%;
  --chart-4: 335 78% 48%;
  --chart-5: 160 84% 39%;

  /* Brand */
  --cicluz-purple: 262 83% 58%;
  --cicluz-blue: 195 85% 55%;
  --cicluz-teal: 175 75% 45%;
  --cicluz-green: 160 84% 45%;
  --cicluz-yellow: 45 93% 55%;
  --cicluz-orange: 25 95% 55%;
  --cicluz-pink: 335 78% 58%;
  --cicluz-red: 0 84% 55%;

  /* Typography (Apple-like): system first, fallbacks after */
  --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
    "SF Pro Text", "SF Pro Display", "Segoe UI", Inter, sans-serif;
  --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;

  --radius: 1rem;

  /* Shadows (premium / soft) */
  --shadow-sm: 0 1px 2px hsl(0 0% 0% / .05);
  --shadow: 0 1px 3px hsl(0 0% 0% / .08);
  --shadow-md: 0 2px 6px hsl(0 0% 0% / .10);
  --shadow-lg: 0 4px 10px hsl(0 0% 0% / .12);

  /* Liquid-glass surfaces (HIG-inspired) */
  --glass-bg: hsl(var(--card) / 0.62);
  --glass-border: hsl(var(--card-border) / 0.35);
  --glass-highlight: hsl(0 0% 100% / 0.35);
  --glass-shadow: 0 1px 0 var(--glass-highlight) inset,
    0 20px 60px hsl(0 0% 0% / 0.12);

  /* Borders fallback */
  --primary-border: hsl(var(--primary));
  --secondary-border: hsl(var(--secondary));
  --muted-border: hsl(var(--muted));
  --accent-border: hsl(var(--accent));
  --destructive-border: hsl(var(--destructive));
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-accent-border: hsl(var(--sidebar-accent));
}

/* =========================================================
   DARK MODE â€” CICLUZ (conteÃºdo escuro + sidebar clara)
   ========================================================= */
@media (max-width: 900px) {
  :root {
    --ui-scale-base: 1;
  }
}

.dark {
  --button-outline: rgba(255, 255, 255, .10);
  --badge-outline: rgba(255, 255, 255, .05);
  --opaque-button-border-intensity: 9;
  --elevate-1: rgba(255, 255, 255, .04);
  --elevate-2: rgba(255, 255, 255, .09);

  /* Page / content */
  --background: 262 25% 8%;
  --foreground: 270 20% 95%;
  --border: 262 20% 18%;

  --card: 262 20% 11%;
  --card-foreground: 270 20% 95%;
  --card-border: 262 15% 16%;

  /* ðŸ”¥ SIDEBAR â€” CLARA NO TEMA ESCURO */
  --sidebar: 262 20% 10%;
  --sidebar-foreground: 270 20% 95%;
  --sidebar-border: 262 20% 18%;

  --sidebar-primary: 262 70% 60%;
  --sidebar-primary-foreground: 0 0% 100%;

  --sidebar-accent: 262 18% 14%;
  --sidebar-accent-foreground: 270 20% 95%;
  --sidebar-ring: 262 70% 60%;

  --popover: 262 20% 14%;
  --popover-foreground: 270 20% 95%;
  --popover-border: 262 20% 20%;

  --primary: 262 70% 60%;
  --primary-foreground: 0 0% 100%;
  --secondary: 262 20% 20%;
  --secondary-foreground: 270 20% 95%;

  --muted: 262 15% 22%;
  --muted-foreground: 270 15% 70%;
  --accent: 262 20% 20%;
  --accent-foreground: 270 20% 95%;

  --destructive: 0 84% 55%;
  --destructive-foreground: 0 0% 100%;

  --input: 262 20% 30%;
  --ring: 262 70% 60%;

  /* Liquid-glass surfaces (HIG-inspired) */
  --glass-bg: hsl(var(--card) / 0.56);
  --glass-border: hsl(var(--border) / 0.5);
  --glass-highlight: hsl(0 0% 100% / 0.14);
  --glass-shadow: 0 1px 0 var(--glass-highlight) inset,
    0 24px 80px hsl(0 0% 0% / 0.45);
}

/* =========================================================
   BASE
   ========================================================= */
@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply h-full;
    font-size: calc(16px * var(--ui-scale));
  }

  body {
    @apply min-h-full font-sans antialiased bg-background text-foreground leading-relaxed;
    text-rendering: optimizeLegibility;
    -webkit-tap-highlight-color: transparent;
  }
}

/* =========================================================
   UTILITIES â€” Elevation / Premium interactions
   ========================================================= */
@layer utilities {
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  .hover-elevate,
  .active-elevate,
  .hover-elevate-2,
  .active-elevate-2 {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:hover::after,
  .active-elevate:active::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: var(--elevate-1);
    pointer-events: none;
  }

  .hover-elevate-2:hover::after,
  .active-elevate-2:active::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: var(--elevate-2);
    pointer-events: none;
  }

  .glass-panel {
    background-color: var(--glass-bg);
    border: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow);
    -webkit-backdrop-filter: blur(18px) saturate(140%);
    backdrop-filter: blur(18px) saturate(140%);
  }

  .glass-panel-subtle {
    background-color: hsl(var(--card) / 0.62);
    border: 1px solid hsl(var(--border) / 0.62);
    box-shadow: 0 1px 0 var(--glass-highlight) inset,
      0 24px 72px hsl(0 0% 0% / 0.12);
    -webkit-backdrop-filter: blur(16px) saturate(150%);
    backdrop-filter: blur(16px) saturate(150%);
  }

  @supports not ((backdrop-filter: blur(1px))) {
    .glass-panel,
    .glass-panel-subtle {
      background-color: hsl(var(--card) / 0.92);
    }
  }

  /* =====================
     TYPOGRAPHY SCALE (Apple-like)
     ===================== */
  .type-display {
    @apply text-2xl md:text-3xl font-light tracking-tight leading-tight;
  }

  .type-title {
    @apply text-lg font-medium tracking-tight leading-snug;
  }

  .type-body {
    @apply text-sm leading-relaxed;
  }

  .type-caption {
    @apply text-xs text-muted-foreground leading-relaxed;
  }

  /* =====================
     MICROINTERACTIONS (press/hover)
     ===================== */
  .pressable {
    @apply transition-[transform,box-shadow,background-color,border-color,color,opacity,width,height,padding] duration-200 ease-out;
    @apply motion-reduce:transition-none motion-reduce:transform-none;
    @apply hover:scale-[1.02];
    @apply active:scale-[0.98] active:translate-y-[0.5px];
    position: relative;
    isolation: isolate;
    will-change: transform;
  }

  .pressable::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(
      135deg,
      hsl(var(--cicluz-purple) / 0.9),
      hsl(var(--cicluz-blue) / 0.85),
      hsl(var(--cicluz-green) / 0.85),
      hsl(var(--cicluz-pink) / 0.9)
    );
    -webkit-mask: linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
    mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
    mask-composite: exclude;
    opacity: 0.18;
    transition: opacity 200ms ease-out, filter 200ms ease-out;
    pointer-events: none;
  }

  @media (hover: hover) and (pointer: fine) {
    .pressable:hover::before {
      opacity: 0.55;
      filter: saturate(1.15) brightness(1.05);
    }

    .pressable:active::before {
      opacity: 0.35;
      filter: saturate(1.05);
    }
  }

  /* =====================
     SPOTLIGHT (cursor glow on surfaces)
     ===================== */
  .spotlight-surface {
    background-image: radial-gradient(
      calc(var(--spotlight-size, 260) * 1px) calc(var(--spotlight-size, 260) * 1px) at
        calc(var(--spotlight-x, 0) * 1px) calc(var(--spotlight-y, 0) * 1px),
      hsl(var(--cicluz-purple) / var(--spotlight-alpha, 0)),
      transparent 70%
    );
    background-attachment: fixed;
    background-repeat: no-repeat;
  }

  @media (hover: hover) and (pointer: fine) {
    .spotlight-surface {
      --spotlight-alpha: 0;
      --spotlight-size: 260;
    }

    .spotlight-surface:hover {
      --spotlight-alpha: 0.18;
    }

    .spotlight-surface:active {
      --spotlight-alpha: 0.12;
    }
  }
}
